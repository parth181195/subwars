<div class="registration-container">
  <div class="registration-card">
    <h1 class="registration-title">SubWars 5 Participant Registration</h1>
    <p class="registration-subtitle">Apply to be part of SubWars 5 - The Ultimate Showdown. Fill in your player details below to participate in the tournament.</p>
    
    <div class="registration-info card-dota" style="margin-bottom: 32px; padding: 20px; background: rgba(102, 192, 244, 0.1); border-image: linear-gradient(135deg, #66c0f4, #cdbe91) 1;">
      <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">
        <strong style="background: linear-gradient(135deg, #66c0f4 0%, #cdbe91 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Community Tournament:</strong> Anyone from the community can participate in SubWars 5! 
        Make sure your Steam profile is set to PUBLIC and join our Discord server for event updates.
      </p>
    </div>

    @if (error) {
      <div class="error-message">{{ error }}</div>
    }
    @if (success) {
      <div class="success-message">
        Registration submitted successfully! Redirecting...
      </div>
    }

    <form (ngSubmit)="onSubmit()" #registrationForm="ngForm">
      <!-- SUB WARS 5 PLAYER DETAILS Section -->
      <div class="form-section-header">
        <h2>SUB WARS 5 PLAYER DETAILS</h2>
      </div>

      <div class="form-group">
        <label class="form-label">Email *</label>
        <input
          type="email"
          class="form-input"
          [(ngModel)]="registrationData.email"
          name="email"
          required
          readonly
          [style.background-color]="'var(--darker-bg)'"
          [style.cursor]="'not-allowed'"
        />
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-top: 4px;">
          Email is from your Google account
        </small>
      </div>

      <div class="form-group">
        <label class="form-label">Full Name *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.fullName"
          name="fullName"
          required
          placeholder="Your answer"
        />
      </div>

      <div class="form-group">
        <label class="form-label">Phone Number / WhatsApp Number *</label>
        <input
          type="tel"
          class="form-input"
          [(ngModel)]="registrationData.phoneNumber"
          name="phoneNumber"
          required
          placeholder="Your answer"
        />
      </div>

      <div class="form-group">
        <label class="form-label">In Game Name / Gaming Nickname *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.inGameName"
          name="inGameName"
          required
          placeholder="Your answer"
        />
      </div>

      <div class="form-group">
        <label class="form-label">Dota 2 Friend ID (SteamID32) / Your in game ID number *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.dota2FriendId"
          name="dota2FriendId"
          required
          placeholder="Your answer"
        />
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-top: 4px;">
          Example: 86894490 (Found in Dota 2 main menu as "FRIEND ID")
        </small>
      </div>

      <div class="form-group">
        <label class="form-label">Steam Profile Link (Make sure your profile is set to PUBLIC) *</label>
        <input
          type="url"
          class="form-input"
          [(ngModel)]="registrationData.steamProfileLink"
          name="steamProfileLink"
          required
          placeholder="https://steamcommunity.com/profiles/... or https://steamcommunity.com/id/..."
        />
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-top: 4px;">
          Example: https://steamcommunity.com/id/PasoLL/
        </small>
      </div>

      <div class="form-group">
        <label class="form-label">Current Rank (Medal) and MMR (ex. IMMORTAL - 8125) *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.rankAndMmr"
          name="rankAndMmr"
          required
          placeholder="e.g., IMMORTAL - 8125"
        />
      </div>

      <div class="form-group">
        <label class="form-label">Join our Discord - It's mandatory! *</label>
        <div class="discord-info card-dota" style="padding: 16px; margin-bottom: 12px; background: rgba(114, 137, 218, 0.1); border-color: #7289da;">
          <p style="margin: 0 0 12px 0; color: var(--text-secondary); line-height: 1.6;">
            Make sure you are able to communicate during the event. All details for SUB WARS 5 will be shared exclusively on our Discord server.
          </p>
          <a href="https://discord.gg/qfnfBRU" target="_blank" class="btn-dota btn-sm" style="display: inline-block;">
            Join Discord Server
          </a>
        </div>
        <div class="checkbox-group">
          <input
            type="checkbox"
            id="discordJoined"
            [(ngModel)]="discordJoined"
            name="discordJoined"
            required
            style="width: auto; margin-right: 8px;"
          />
          <label for="discordJoined" style="display: inline; color: var(--text-secondary);">Done - I have joined the Discord server</label>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Discord ID *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.discordId"
          name="discordId"
          required
          placeholder="Your Discord username (e.g., pasoll)"
        />
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-top: 4px;">
          Found in your Discord profile. Click "Copy Username" button to get it.
        </small>
      </div>

      <!-- File Uploads -->
      <div class="form-group">
        <label class="form-label">Profile Image (Captionless) *</label>
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-bottom: 8px;">
          Max 5MB - Image only
        </small>
        <div class="file-upload">
          <input
            type="file"
            accept="image/*"
            (change)="onProfileImageSelected($event)"
            required
          />
          <label class="file-upload-label">
            @if (!profileImage) {
              <span>Choose Profile Image</span>
            }
            @if (profileImage) {
              <span>{{ profileImage.name }}</span>
            }
          </label>
        </div>
        @if (profileImagePreview) {
          <img [src]="profileImagePreview" class="file-preview" />
        }
      </div>

      <!-- Proof of Payment Section -->
      <div class="form-section-header" style="margin-top: 40px;">
        <h2>PROOF OF PAYMENT</h2>
      </div>

      <div class="payment-info card-dota" style="padding: 20px; margin-bottom: 24px; background: rgba(102, 192, 244, 0.1); border-image: linear-gradient(135deg, #66c0f4, #cdbe91) 1;">
        <p style="margin: 0 0 16px 0; color: var(--text-secondary); line-height: 1.6;">
          <strong style="background: linear-gradient(135deg, #66c0f4 0%, #cdbe91 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Entry Fee: INR 300</strong>
        </p>
        <p style="margin: 0 0 12px 0; color: var(--text-muted); font-size: 14px;">
          Pay the entry fee using the UPI QR code or UPI ID below and upload the screenshot of the transaction.
        </p>
        <div style="background: var(--darker-bg); padding: 16px; border-radius: 8px; margin: 16px 0; text-align: center;">
          <p style="margin: 0 0 12px 0; background: linear-gradient(135deg, #66c0f4 0%, #cdbe91 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 600;">UPI ID: omkar.urunkar13@okaxis</p>
          <p style="margin: 0; color: var(--text-muted); font-size: 12px;">Scan to pay with any UPI app</p>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Upload Proof of Payment (Screenshot/PDF) *</label>
        <small style="color: var(--text-muted); font-size: 12px; display: block; margin-bottom: 8px;">
          Upload 1 supported file: PDF or image. Max 100 MB.
        </small>
        <div class="file-upload">
          <input
            type="file"
            accept="image/*,application/pdf"
            (change)="onProofOfPaymentSelected($event)"
            required
          />
          <label class="file-upload-label">
            @if (!proofOfPayment) {
              <span>Add file</span>
            }
            @if (proofOfPayment) {
              <span>{{ proofOfPayment.name }}</span>
            }
          </label>
        </div>
        @if (proofOfPaymentPreview) {
          <img [src]="proofOfPaymentPreview" class="file-preview" />
        }
      </div>

      <div class="form-group">
        <label class="form-label">UPI ID / Number you did the payment from *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="registrationData.upiId"
          name="upiId"
          required
          placeholder="Your answer"
        />
      </div>


      <button
        type="submit"
        class="btn-dota btn-dota-submit"
        [disabled]="submitting || !registrationForm.valid"
      >
        {{ submitting ? 'Submitting...' : 'Submit Registration' }}
      </button>
    </form>
  </div>
</div>

